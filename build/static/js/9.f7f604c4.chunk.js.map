{"version":3,"sources":["components/Login/LoginModal.js","pages/Login.js"],"names":["Login","setLoggedInUser","useContext","UserContext","useState","showModal","setShowModal","newUser","setNewUser","useForm","registerSignIn","register","handleSignIn","handleSubmit","registerSignUp","handleSignUp","history","useHistory","useLocation","pathname","from","state","useEffect","onSubmit","data","initializeLoginFramework","loading","toast","name","email","password","createUserWithEmailAndPassword","then","res","dismiss","handleResponse","catch","err","error","message","signInWithEmailAndPassword","setJWTToken","replace","success","swal","title","content","icon","buttons","dangerMode","ok","handleSignOut","Modal","show","onHide","size","centered","Header","closeButton","Body","className","defaultValue","required","type","onClick","handleGoogleSignIn"],"mappings":"kRAoMeA,EAnLD,WACZ,IAAQC,EAAoBC,qBAAWC,KAA/BF,gBACR,EAAkCG,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KAEA,EAAiEC,cAA/CC,EAAlB,EAAQC,SAAwCC,EAAhD,EAAkCC,aAClC,EAAiEJ,cAA/CK,EAAlB,EAAQH,SAAwCI,EAAhD,EAAkCF,aAE5BG,EAAUC,cAChB,EAAkCC,cAA1BC,EAAR,EAAQA,SACAC,GADR,iBAC0BC,OAAS,CAAED,KAAM,CAAED,SAAU,OAA/CC,KAERE,qBAAU,iBAAmB,WAAbH,GAAyBb,GAAa,KAAO,CAACa,IAE9D,IAcMI,EAAW,SAACC,GAChBC,cACA,IAAMC,EAAUC,IAAMD,QAAQ,kBACtBE,EAA0BJ,EAA1BI,KAAMC,EAAoBL,EAApBK,MAAOC,EAAaN,EAAbM,SAEjBvB,GAAWqB,GAAQC,GAASC,GAC9BC,YAA+BH,EAAMC,EAAOC,GACzCE,MAAK,SAACC,GACLA,EAAIL,KAAOA,EACXD,IAAMO,QAAQR,GACdS,EAAeF,MAEhBG,OAAM,SAACC,GACNV,IAAMO,QAAQR,GACdC,IAAMW,MAAMD,EAAIE,aAIjBhC,GAAWsB,GAASC,GACvBU,YAA2BX,EAAOC,GAC/BE,MAAK,SAACC,GACLN,IAAMO,QAAQR,GACdS,EAAeF,MAEhBG,OAAM,SAACC,GACNV,IAAMO,QAAQR,GACdC,IAAMW,MAAMD,EAAIE,aAKlBJ,EAAiB,SAACF,GACtBhC,EAAgBgC,GAChBQ,cACAnC,GAAa,GACbU,EAAQ0B,QAAQtB,GAChBO,IAAMgB,QAAQ,2BACI,oBAAdV,EAAIJ,OACNe,IAAK,CACHC,MAAO,OACPC,QACE,8EAEE,0BAGJC,KAAM,UACNC,SAAS,EACTC,YAAY,IACXjB,MAAK,SAACkB,GACFA,GACHC,cAAgBnB,MAAK,SAACC,GACpBhC,EAAgBgC,GAChBN,IAAMW,MAAM,sBAOtB,OACE,eAACc,EAAA,EAAD,CACEC,KAAMhD,EACNiD,OAAQ,WACNhD,GAAa,GACbU,EAAQ0B,QAAQ,CAAEvB,SAAU,OAE9BoC,KAAK,KACLC,UAAQ,EAPV,UASE,cAACJ,EAAA,EAAMK,OAAP,CAAcC,aAAW,IACzB,cAACN,EAAA,EAAMO,KAAP,UACE,sBAAKC,UAAWrD,EAAU,iBAAmB,OAA7C,UACE,sBAAKqD,UAAU,eAAf,UACE,yCACA,uBAAMrC,SAAUX,EAAaW,GAA7B,UACE,kCACE,yCACA,+CACEsC,aAAa,mBACTnD,EAAe,QAAS,CAAEoD,UAAU,KAF1C,IAGEC,KAAK,cAGT,kCACE,4CACA,+CACEF,aAAa,UACTnD,EAAe,WAAY,CAAEoD,UAAU,KAF7C,IAGEC,KAAK,iBAGT,wBAAQA,KAAK,SAASH,UAAU,mBAAhC,qBAGA,wBACEG,KAAK,SACLC,QA/GO,WACnBvC,cACA,IAAMC,EAAUC,IAAMD,QAAQ,kBAC9BuC,cACGjC,MAAK,SAACC,GACLN,IAAMO,QAAQR,GACdS,EAAeF,MAEhBG,OAAM,SAACC,GACNV,IAAMO,QAAQR,GACdC,IAAMW,MAAMD,EAAIE,aAsGRqB,UAAU,cAHZ,SAKE,kDAIN,sBAAKA,UAAU,WAAf,UACE,sBAAKA,UAAU,MAAf,UACE,qBAAKA,UAAU,kBAAf,SACE,6CAGF,sBAAKI,QAAS,kBAAMxD,GAAYD,IAAUqD,UAAU,WAApD,UACE,sBAAMA,UAAU,QAAhB,qBACA,sBAAMA,UAAU,QAAhB,2BAGJ,sBAAKA,UAAU,eAAf,UACE,gDACA,uBAAMrC,SAAUR,EAAaQ,GAA7B,UACE,kCACE,wCACA,iDACMT,EAAe,OAAQ,CAAEgD,UAAU,KADzC,IAEEC,KAAK,aAGT,kCACE,yCACA,iDACMjD,EAAe,QAAS,CAAEgD,UAAU,KAD1C,IAEEC,KAAK,cAGT,kCACE,4CACA,iDACMjD,EAAe,WAAY,CAAEgD,UAAU,KAD7C,IAEEC,KAAK,iBAGT,wBAAQA,KAAK,SAASH,UAAU,mBAAhC,uCC5KD5D,UATD,WACZ,MAAwBI,oBAAS,GAAjC,6BACA,OACE,kCACE,cAAC,EAAD","file":"static/js/9.f7f604c4.chunk.js","sourcesContent":["import swal from \"@sweetalert/with-react\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport { useForm } from \"react-hook-form\";\nimport toast from \"react-hot-toast\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { UserContext } from \"../../App\";\nimport {\n  createUserWithEmailAndPassword,\n  handleGoogleSignIn,\n  handleSignOut,\n  initializeLoginFramework,\n  setJWTToken,\n  signInWithEmailAndPassword,\n} from \"./LoginManager\";\nimport \"./LoginModal.css\";\n\nconst Login = () => {\n  const { setLoggedInUser } = useContext(UserContext);\n  const [showModal, setShowModal] = useState(false);\n  const [newUser, setNewUser] = useState(false);\n\n  const { register: registerSignIn, handleSubmit: handleSignIn } = useForm();\n  const { register: registerSignUp, handleSubmit: handleSignUp } = useForm();\n\n  const history = useHistory();\n  const { pathname, ...location } = useLocation();\n  const { from } = location.state || { from: { pathname: \"/\" } };\n\n  useEffect(() => pathname === \"/login\" && setShowModal(true), [pathname]);\n\n  const googleSignIn = () => {\n    initializeLoginFramework();\n    const loading = toast.loading(\"Please wait...\");\n    handleGoogleSignIn()\n      .then((res) => {\n        toast.dismiss(loading);\n        handleResponse(res);\n      })\n      .catch((err) => {\n        toast.dismiss(loading);\n        toast.error(err.message);\n      });\n  };\n\n  const onSubmit = (data) => {\n    initializeLoginFramework();\n    const loading = toast.loading(\"Please wait...\");\n    const { name, email, password } = data;\n\n    if (newUser && name && email && password) {\n      createUserWithEmailAndPassword(name, email, password)\n        .then((res) => {\n          res.name = name;\n          toast.dismiss(loading);\n          handleResponse(res);\n        })\n        .catch((err) => {\n          toast.dismiss(loading);\n          toast.error(err.message);\n        });\n    }\n\n    if (!newUser && email && password) {\n      signInWithEmailAndPassword(email, password)\n        .then((res) => {\n          toast.dismiss(loading);\n          handleResponse(res);\n        })\n        .catch((err) => {\n          toast.dismiss(loading);\n          toast.error(err.message);\n        });\n    }\n  };\n\n  const handleResponse = (res) => {\n    setLoggedInUser(res);\n    setJWTToken();\n    setShowModal(false);\n    history.replace(from);\n    toast.success(\"Successfully Logged In!\");\n    if (res.email === \"admin@admin.com\") {\n      swal({\n        title: \"WOW!\",\n        content: (\n          <p>\n            You have entered the admin panel for testing.\n            <br />\n          </p>\n        ),\n        icon: \"success\",\n        buttons: true,\n        dangerMode: true,\n      }).then((ok) => {\n        if (!ok) {\n          handleSignOut().then((res) => {\n            setLoggedInUser(res);\n            toast.error(\"Logged Out!\");\n          });\n        }\n      });\n    }\n  };\n\n  return (\n    <Modal\n      show={showModal}\n      onHide={() => {\n        setShowModal(false);\n        history.replace({ pathname: \"/\" });\n      }}\n      size=\"lg\"\n      centered\n    >\n      <Modal.Header closeButton />\n      <Modal.Body>\n        <div className={newUser ? \"cont s--signup\" : \"cont\"}>\n          <div className=\"form sign-in\">\n            <h2>Sign in</h2>\n            <form onSubmit={handleSignIn(onSubmit)}>\n              <label>\n                <span>Email</span>\n                <input\n                  defaultValue=\"admin@admin.com\"\n                  {...registerSignIn(\"email\", { required: true })}\n                  type=\"email\"\n                />\n              </label>\n              <label>\n                <span>Password</span>\n                <input\n                  defaultValue=\"123456\"\n                  {...registerSignIn(\"password\", { required: true })}\n                  type=\"password\"\n                />\n              </label>\n              <button type=\"submit\" className=\"btn-primary my-4\">\n                Sign In\n              </button>\n              <button\n                type=\"button\"\n                onClick={googleSignIn}\n                className=\"btn-success\"\n              >\n                <span>Google</span>\n              </button>\n            </form>\n          </div>\n          <div className=\"sub-cont\">\n            <div className=\"img\">\n              <div className=\"img__text m--up\">\n                <h2>New here?</h2>\n              </div>\n\n              <div onClick={() => setNewUser(!newUser)} className=\"img__btn\">\n                <span className=\"m--up\">Sign Up</span>\n                <span className=\"m--in\">Sign In</span>\n              </div>\n            </div>\n            <div className=\"form sign-up\">\n              <h2>Create Account</h2>\n              <form onSubmit={handleSignUp(onSubmit)}>\n                <label>\n                  <span>Name</span>\n                  <input\n                    {...registerSignUp(\"name\", { required: true })}\n                    type=\"text\"\n                  />\n                </label>\n                <label>\n                  <span>Email</span>\n                  <input\n                    {...registerSignUp(\"email\", { required: true })}\n                    type=\"email\"\n                  />\n                </label>\n                <label>\n                  <span>Password</span>\n                  <input\n                    {...registerSignUp(\"password\", { required: true })}\n                    type=\"password\"\n                  />\n                </label>\n                <button type=\"submit\" className=\"btn-primary my-4\">\n                  Sign Up\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default Login;\n","import React, { useState } from \"react\";\nimport LoginModal from \"../components/Login/LoginModal\";\n\nconst Login = () => {\n  const [show, setShow] = useState(true);\n  return (\n    <section>\n      <LoginModal />\n    </section>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}